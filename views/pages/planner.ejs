<%- include ('../partials/header') %>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container px-4 px-lg-5">
        <a class="navbar-brand" href="/homepage"><span class="text-danger">Stress</span><span class="text-primary">Busters</span></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                <li class="nav-item"><a class="nav-link" aria-current="page" href="/homepage">Home</a></li>
                <li class="nav-item"><a class="nav-link active" href="/planner">Planner</a></li>
                <li class="nav-item"><a class="nav-link " href="/reviews"> My Reviews</a></li>
            </ul>
            <div class="btn-group">
                <button type="button" class="btn btn-dark dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-person-fill"></i> <%= userDetails.name %>
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="/work"><i class="bi bi-briefcase"></i> Work</a></li>
                  <li><a class="dropdown-item" href="/life"><i class="bi bi-person-square"></i> Life</a></li>
                  <li><a class="dropdown-item" href="/logout"><i class="bi bi-box-arrow-left"></i> Logout</a></li>
                </ul>
              </div>
            
        </div>
    </div>
</nav>
<div class="container">
    <div class="row justify-content-md-center">
        <div id='calendar' class="col-md-12 bg-white">

        </div>
    </div>
    <div class="modal fade" id="technologymodal" tabindex="-1" aria-labelledby="technologymodalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">New Technology Updates Available!!</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            New Tech Updates in <%= userDetails.techs %> Click "redirect" to be redirected . Cancel will close the popup
            
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <% if(userDetails.techs == 'Python') {%> 
                <a href="https://docs.python.org/3/whatsnew/index.html" type="button" class="btn btn-primary" >Redirect</a>
            <%} else if(userDetails.techs == 'Java') {%>   
              <a href="https://www.oracle.com/java/technologies/javase/8-whats-new.html" type="button" class="btn btn-primary" >Redirect</a>
            <%} else if(userDetails.techs == 'C++') {%>
              <a href="https://www.mycplus.com/featured-articles/cplusplus-17-features/" type="button" class="btn btn-primary" >Redirect</a>
            <%}%>  
          </div>
        </div>
      </div>
    </div>
</div>

<script>
     document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {

          initialView: 'timeGridWeek',
          // initialDate: '2022-11-12',
          nowIndicator: true,
          headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
          },
          navLinks: true, // can click day/week names to navigate views
          editable: true,
          selectable: true,
          selectHelper: true,
          selectMirror: true,
          dayMaxEvents: true,

          nextDayThreshold: "00:00:00", 
          events: [
            { 
            groupId: 101,
            title: 'Client Meeting', 
            daysOfWeek: ['2','4'],
            startTime: '08:00:00', 
            endTime: '09:00:00', 
            // start: '2022-11-11T08:00:00', 
            // end: '2018-11-11T09:00:00', 
            description: 'Meeting with Client',
            color: '#E41A32'

        },

        { 
            groupId: 102,
            title: 'Team Meeting', 
            daysOfWeek: ['1','3', '5'],
            startTime: '15:00:00', 
            endTime: '16:00:00', 
            // start: '2022-11-11T08:00:00', 
            // end: '2018-11-11T09:00:00', 
            description: 'Meeting with Client',
            color: '#E41A32'

        },

        { 
            groupId: 102,
            title: 'Team Meeting', 
            daysOfWeek: ['2'],
            startTime: '13:00:00', 
            endTime: '14:00:00', 
            // start: '2022-11-11T08:00:00', 
            // end: '2018-11-11T09:00:00', 
            description: 'Meeting with Client',
            color: '#E41A32'

        },

        { 
            groupId: 102,
            title: 'Project Meeting', 
            daysOfWeek: ['1'],
            startTime: '11:00:00', 
            endTime: '12:00:00', 
            // start: '2022-11-11T08:00:00', 
            // end: '2018-11-11T09:00:00', 
            description: 'Meeting with Client',
            color: '#E41A32'

        },
        
        { 
            groupId: 102,
            title: 'Project Meeting', 
            daysOfWeek: ['5'],
            startTime: '11:30:00', 
            endTime: '12:30:00', 
            // start: '2022-11-11T08:00:00', 
            // end: '2018-11-11T09:00:00', 
            description: 'Meeting with Client',
            color: '#E41A32'

        },
        
        { 
            // groupId: 'blueEvents'
            title: 'Yoga', 
            daysOfWeek: ['1','3','5','6'],
            startTime: '06:30:00', 
            endTime: '07:00:00', 
            // start: '2022-11-11T16:30:00', 
            // end: '2018-11-11T17:00:00', 
            description: 'Do Power Yoga',
            color: '#5B2684'
        },

        { 
            // groupId: 'blueEvents'
            title: 'Cycling', 
            daysOfWeek: ['0','2','4'],
            startTime: '17:30:00', 
            endTime: '18:30:00', 
            // start: '2022-11-11T16:30:00', 
            // end: '2018-11-11T17:00:00', 
            description: 'Do Power Yoga',
            color: '#5B2684'
        },

        {
          title: 'Sleep', 
          daysOfWeek: ['0','1','2','3','4'],
          startTime: '22:30:00', 
          endTime: '06:00:00', 
          color: '#808080',
          // nextDayThreshold: "00:00:00", 

        },

        {
          title: 'Sleep', 
          daysOfWeek: ['5','6'],
          startTime: '23:30:00', 
          endTime: '08:00:00', 
          color: '#808080',
          // nextDayThreshold: "00:00:00", 

        },


        {
          title: 'Lunch', 
          daysOfWeek: ['1','2','3','5'],
          startTime: '12:30:00', 
          endTime: '13:30:00', 
          color: '#1DAADB',
          // nextDayThreshold: "00:00:00", 

        },
        {
          title: 'Team Lunch', 
          daysOfWeek: ['4'],
          startTime: '12:30:00', 
          endTime: '14:00:00', 
          color: '#1DAADB',
          // nextDayThreshold: "00:00:00", 

        },
        {
          title: 'Lunch', 
          daysOfWeek: ['6','0'],
          startTime: '13:00:00', 
          endTime: '14:00:00', 
          color: '#1DAADB',
          // nextDayThreshold: "00:00:00", 

        },
        {
          title: 'Dinner', 
          daysOfWeek: ['0','1','2','3','4','5','6'],
          startTime: '20:00:00', 
          endTime: '21:00:00', 
          color: '#1DAADB',
          // nextDayThreshold: "00:00:00", 

        },
        {
          title: 'Breakfast', 
          daysOfWeek: ['1','2','3','4','5'],
          startTime: '07:00:00', 
          endTime: '07:30:00', 
          color: '#1DAADB',
          // nextDayThreshold: "00:00:00", 

        },
        {
          title: 'Breakfast', 
          daysOfWeek: ['6','0'],
          startTime: '8:30:00', 
          endTime: '09:30:00', 
          color: '#1DAADB',
          // nextDayThreshold: "00:00:00", 

        },
        
    ],
    
    });
        
        calendar.render();
      });
      $("document").ready(function(){
    var data = <%-JSON.stringify(userDetails) %>;
    var interval = parseInt(data.screentime) * 1000 * 2
    setTimeout(function(){
    $("#technologymodal").modal("show");
    },interval);
    //setTimeout(function() { if (window.confirm('New Tech Updates in ' + data.techs + ' If you click "ok" you would be redirected . Cancel will load this website ')) 
// {
//     if(data.techs == "Python") {
//         window.location.href='https://docs.python.org/3/whatsnew/index.html';
//     }
//     else if(data.techs == "Java") {
//         window.location.href='https://www.oracle.com/java/technologies/javase/8-whats-new.html';
//     }
//     else if(data.techs == "C++") {
//         window.location.href='https://www.mycplus.com/featured-articles/cplusplus-17-features/';
//     }

// }; }, interval);
})
</script>

<%- include ('../partials/footer') %>
